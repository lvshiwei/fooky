!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react"),require("yup")):"function"==typeof define&&define.amd?define(["react","yup"],e):(r=r||self).fooky=e(r.react,r.yup)}(this,function(t,s){"use strict";"default"in t&&t.default;var r,u=(function(r){function e(){return r.exports=e=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},e.apply(this,arguments)}r.exports=e}(r={exports:{}}),r.exports);var e=function(r){throw new Error('"'+r+'" is read-only')};return{useModel:function(r){void 0===r&&(r={});var e=t.useState(r),a=e[0],i=e[1];return[a,function(r,e){if("string"==typeof r){var t=r,n=e,o=u({},a);return o[t]=n,void i(o)}"object"!=typeof r||i(u(u({},a),r))}]},useValidation:function(a){function n(o,e){return new Promise(function(t,n){var r=s.reach(a,o);r?r.validate(e).then(function(){var e,r;e=o,-1<(r=i.findIndex(function(r){return r.path===e}))&&(i.splice(r,1),u([].concat(i))),t()}).catch(function(r){var e,t;e=o,t=r,i.some(function(r){return r.path===e})||(t.path=e,i.push(t),u([].concat(i))),n({message:r.message,details:r})}):n({message:"找不到验证规则"})})}var r=t.useState([]),i=r[0],u=r[1];return{errors:i,validate:function(r,e){return 1===arguments.length?(t=r,new Promise(function(r,e){a.validate(t,{abortEarly:!1}).then(function(){u([]),r()}).catch(function(r){Array.isArray(r.inner)&&0<r.inner.length?(u([].concat(r.inner)),e({message:r.errors[0],details:r})):(r.path=name,u([r]),e({message:r.message,details:r}))})})):2===arguments.length?n(r,e):void 0;var t},hasError:function(e){return Array.isArray(i)&&i.some(function(r){return r.path===e})},getErrors:function(e){return Array.isArray(i)&&i.filter(function(r){return r.path===e})},clearErrors:function(){return e("errors"),i=[]}}}}});
