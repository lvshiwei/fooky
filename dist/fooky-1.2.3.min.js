!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react"),require("yup")):"function"==typeof define&&define.amd?define(["exports","react","yup"],r):r((e=e||self).fooky={},e.react,e.yup)}(this,function(e,t,s){"use strict";"default"in t&&t.default;var r=function(e){throw new Error('"'+e+'" is read-only')};var n,u=(function(e){function r(){return e.exports=r=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r.apply(this,arguments)}e.exports=r}(n={exports:{}}),n.exports);e.useModel=function(e){void 0===e&&(e={});var r=t.useState(e),a=r[0],i=r[1];return[a,function(e,r){if("string"==typeof e){var t=e,n=r,o=u({},a);return o[t]=n,void i(o)}"object"!=typeof e||i(u(u({},a),e))}]},e.useValidation=function(a){function n(o,r){return new Promise(function(t,n){var e=s.reach(a,o);e?e.validate(r).then(function(){var r,e;r=o,-1<(e=i.findIndex(function(e){return e.path===r}))&&(i.splice(e,1),u([].concat(i))),t()}).catch(function(e){var r,t;r=o,t=e,i.some(function(e){return e.path===r})||(t.path=r,i.push(t),u([].concat(i))),n({message:e.message,details:e})}):n({message:"找不到验证规则"})})}var e=t.useState([]),i=e[0],u=e[1];return{errors:i,validate:function(e,r){return 1===arguments.length?(t=e,new Promise(function(e,r){a.validate(t,{abortEarly:!1}).then(function(){u([]),e()}).catch(function(e){Array.isArray(e.inner)&&0<e.inner.length?(u([].concat(e.inner)),r({message:e.errors[0],details:e})):(e.path=name,u([e]),r({message:e.message,details:e}))})})):2===arguments.length?n(e,r):void 0;var t},hasError:function(r){return Array.isArray(i)&&i.some(function(e){return e.path===r})},getErrors:function(r){return Array.isArray(i)&&i.filter(function(e){return e.path===r})},clearErrors:function(){return r("errors"),i=[]}}},Object.defineProperty(e,"__esModule",{value:!0})});
